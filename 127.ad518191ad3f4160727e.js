"use strict";(self.webpackChunkswapi_technical_test=self.webpackChunkswapi_technical_test||[]).push([[127],{9127:(Q,d,n)=>{n.r(d),n.d(d,{FilmsModule:()=>J});var u=n(8583),m=n(15),_=n(8239),t=n(7716),f=n(2340),h=n(1841);let T=(()=>{class e{constructor(i){this.http=i}getSearch(i){return this.http.get(`${f.N.API_URL}/films/${i}/`)}getFilms(){return this.http.get(`${f.N.API_URL}/films/`)}}return e.\u0275fac=function(i){return new(i||e)(t.LFG(h.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var c=n(3738),p=n(1095);let C=(()=>{class e{constructor(i,s,a){this.route=i,this.serviceFilms=s,this.router=a,this.detailsId=this.route.snapshot.params.id}ngOnInit(){this.loadDetails(this.detailsId)}loadDetails(i){var s=this;return(0,_.Z)(function*(){s.serviceFilms.getSearch(i).subscribe(a=>{s.details=a})})()}goBack(){this.router.navigate(["films"])}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(m.gz),t.Y36(T),t.Y36(m.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-films-details"]],decls:18,vars:6,consts:[[1,"detalis-card"],[1,"items-start"],[1,"mt-2"],[1,"font-bold","mt-5"],["align","end"],["mat-button","",3,"click"]],template:function(i,s){1&i&&(t.TgZ(0,"mat-card",0),t.TgZ(1,"mat-card-content"),t.TgZ(2,"div",1),t.TgZ(3,"p",2),t._uU(4),t.qZA(),t.TgZ(5,"p",3),t._uU(6),t.qZA(),t.TgZ(7,"p",2),t._uU(8),t.qZA(),t.TgZ(9,"p",2),t._uU(10),t.qZA(),t.TgZ(11,"p",2),t._uU(12),t.qZA(),t.TgZ(13,"p",2),t._uU(14),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"mat-card-actions",4),t.TgZ(16,"button",5),t.NdJ("click",function(){return s.goBack()}),t._uU(17,"Back"),t.qZA(),t.qZA(),t.qZA()),2&i&&(t.xp6(4),t.hij(" title : ",s.details.title," "),t.xp6(2),t.hij(" Episode: ",s.details.episode_id," "),t.xp6(2),t.hij(" Director : ",s.details.director," "),t.xp6(2),t.hij(" Producer : ",s.details.producer," "),t.xp6(2),t.hij(" Date : ",s.details.release_date," "),t.xp6(2),t.hij(" Opening crawl : ",s.details.opening_crawl," "))},directives:[c.a8,c.dn,c.hq,p.lW],styles:[""]}),e})();var F=n(887),o=n(2789);function Z(e,l){1&e&&(t.TgZ(0,"th",10),t._uU(1," Title "),t.qZA())}function v(e,l){if(1&e&&(t.TgZ(0,"td",11),t._uU(1),t.qZA()),2&e){const i=l.$implicit;t.xp6(1),t.hij(" ",i.title," ")}}function b(e,l){1&e&&(t.TgZ(0,"th",10),t._uU(1," Episode "),t.qZA())}function A(e,l){if(1&e&&(t.TgZ(0,"td",11),t._uU(1),t.qZA()),2&e){const i=l.$implicit;t.xp6(1),t.hij(" ",i.episode_id," ")}}function x(e,l){1&e&&(t.TgZ(0,"th",10),t._uU(1," Director "),t.qZA())}function y(e,l){if(1&e&&(t.TgZ(0,"td",11),t._uU(1),t.qZA()),2&e){const i=l.$implicit;t.xp6(1),t.hij(" ",i.director," ")}}function D(e,l){1&e&&(t.TgZ(0,"th",10),t._uU(1," Producer "),t.qZA())}function N(e,l){if(1&e&&(t.TgZ(0,"td",11),t._uU(1),t.qZA()),2&e){const i=l.$implicit;t.xp6(1),t.hij(" ",i.producer," ")}}function U(e,l){1&e&&(t.TgZ(0,"th",10),t._uU(1," Manage "),t.qZA())}function Y(e,l){if(1&e){const i=t.EpF();t.TgZ(0,"td",11),t.TgZ(1,"button",12),t.NdJ("click",function(){const r=t.CHM(i).$implicit;return t.oxw().detailsClick.emit(r)}),t.TgZ(2,"span"),t._uU(3,"details"),t.qZA(),t.qZA(),t.qZA()}}function S(e,l){1&e&&t._UZ(0,"tr",13)}function w(e,l){1&e&&t._UZ(0,"tr",14)}let k=(()=>{class e{constructor(){this.detailsClick=new t.vpe,this.displayedColumns=["title","episode_id","director","producer","manage"],this.dataSource=this.films}ngOnInit(){console.log(this.films)}}return e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-films-table"]],inputs:{films:"films"},outputs:{detailsClick:"detailsClick"},decls:18,vars:3,consts:[["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","title"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","episode_id"],["matColumnDef","director"],["matColumnDef","producer"],["matColumnDef","manage"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","matTooltip","Details",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,s){1&i&&(t.TgZ(0,"table",0),t.ynx(1,1),t.YNc(2,Z,2,0,"th",2),t.YNc(3,v,2,1,"td",3),t.BQk(),t.ynx(4,4),t.YNc(5,b,2,0,"th",2),t.YNc(6,A,2,1,"td",3),t.BQk(),t.ynx(7,5),t.YNc(8,x,2,0,"th",2),t.YNc(9,y,2,1,"td",3),t.BQk(),t.ynx(10,6),t.YNc(11,D,2,0,"th",2),t.YNc(12,N,2,1,"td",3),t.BQk(),t.ynx(13,7),t.YNc(14,U,2,0,"th",2),t.YNc(15,Y,4,0,"td",3),t.BQk(),t.YNc(16,S,1,0,"tr",8),t.YNc(17,w,1,0,"tr",9),t.qZA()),2&i&&(t.Q6J("dataSource",s.films),t.xp6(16),t.Q6J("matHeaderRowDef",s.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",s.displayedColumns))},directives:[o.BZ,o.w1,o.fO,o.Dz,o.as,o.nj,o.ge,o.ev,p.lW,o.XQ,o.Gk],styles:["table[_ngcontent-%COMP%]{width:100%}"]}),e})();function j(e,l){if(1&e){const i=t.EpF();t.TgZ(0,"app-films-table",1),t.NdJ("detailsClick",function(a){return t.CHM(i),t.oxw().details(a)}),t.qZA()}if(2&e){const i=t.oxw();t.Q6J("films",i.films$)}}const q=[{path:"",component:(()=>{class e{constructor(i,s,a,r){this.serviceFilms=i,this.router=s,this.route=a,this.lastSearchService=r,this.loadFilms(),this.sucription=this.lastSearchService.filterSubject.subscribe(g=>{"films"===window.location.href.split("/")[3]&&this.filter(g)})}ngOnInit(){}loadFilms(){let i=localStorage.historial;""!=i?this.serviceFilms.getFilms().subscribe(s=>{this.films$=s.results,localStorage.setItem("films",JSON.stringify(this.films$))}):this.films$=i}details(i){const s=i.url.split("/");this.router.navigate(["details",s[s.length-2]],{relativeTo:this.route})}filter(i){let s=localStorage.getItem("films");s=JSON.parse(s),i=""!==i?i.toLocaleLowerCase():"",this.films$=s.filter(a=>a.title.toLocaleLowerCase().indexOf(i)>-1)}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(T),t.Y36(m.F0),t.Y36(m.gz),t.Y36(F.p))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-films"]],decls:2,vars:1,consts:[[3,"films","detailsClick",4,"ngIf"],[3,"films","detailsClick"]],template:function(i,s){1&i&&(t.ynx(0),t.YNc(1,j,1,1,"app-films-table",0),t.BQk()),2&i&&(t.xp6(1),t.Q6J("ngIf",s.films$.length))},directives:[u.O5,k],styles:[""]}),e})()},{path:"details/:id",component:C}];let B=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[m.Bz.forChild(q)],m.Bz]}),e})();var $=n(6627);let J=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[u.ez,B,o.p0,$.Ps,c.QW,h.JF,p.ot]]}),e})()}}]);